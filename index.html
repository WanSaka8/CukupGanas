<!doctype html>
<html lang="id">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>VocabSR - Simple Anki-like Spaced Repetition</title>
  <style>
    :root {
      --bg: #0f1724;
      --card: #1e293b;
      --accent: #06b6d4;
      --accent-dark: #0891b2;
      --muted: #94a3b8;
      --text: #e2e8f0;
      --text-light: #f8fafc;
      --glass: rgba(255, 255, 255, 0.04);
      --success: #34d399;
      --warning: #f59e0b;
      --danger: #fb7185;
      --info: #60a5fa;
      --border: rgba(255, 255, 255, 0.08);
      --radius: 12px;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html,
    body {
      height: 100%;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      color: var(--text);
      background: linear-gradient(135deg, #0f1724 0%, #1e293b 100%);
      line-height: 1.5;
      -webkit-tap-highlight-color: transparent;
    }

    .app {
      max-width: 1200px;
      margin: 0 auto;
      padding: 16px;
    }

    header {
      display: flex;
      gap: 16px;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    h1 {
      margin: 0;
      font-size: 22px;
      font-weight: 600;
      color: var(--text-light);
      background: linear-gradient(90deg, #06b6d4, #34d399);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .muted {
      color: var(--muted);
      font-size: 14px;
      margin-top: 4px;
    }

    .controls {
      margin-left: auto;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    button {
      background: var(--accent);
      border: none;
      color: #022;
      padding: 10px 16px;
      border-radius: var(--radius);
      cursor: pointer;
      font-weight: 500;
      font-size: 14px;
      transition: all 0.2s ease;
      box-shadow: var(--shadow);
    }

    button:active {
      transform: scale(0.96);
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
    }

    @media (min-width: 900px) {
      .grid {
        grid-template-columns: 1fr 360px;
      }
    }

    .panel {
      background: rgba(15, 23, 42, 0.7);
      border-radius: var(--radius);
      padding: 18px;
      border: 1px solid var(--border);
      backdrop-filter: blur(8px);
      box-shadow: var(--shadow);
    }

    .deck-list {
      max-height: 400px;
      overflow: auto;
      padding-right: 8px;
    }

    .card-preview {
      height: 220px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: var(--radius);
      background: var(--glass);
      margin-bottom: 16px;
      perspective: 1000px;
      position: relative;
    }

    .card {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s;
      border-radius: var(--radius);
      overflow: hidden;
    }

    .card.flipped {
      transform: rotateY(180deg);
    }

    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      text-align: center;
    }

    .card-front {
      background: linear-gradient(135deg, rgba(6, 182, 212, 0.1) 0%, rgba(52, 211, 153, 0.1) 100%);
      border: 1px solid rgba(6, 182, 212, 0.3);
    }

    .card-back {
      background: linear-gradient(135deg, rgba(251, 113, 133, 0.1) 0%, rgba(251, 191, 36, 0.1) 100%);
      border: 1px solid rgba(251, 113, 133, 0.3);
      transform: rotateY(180deg);
    }

    .big {
      font-size: 28px;
      font-weight: 600;
      color: var(--text-light);
    }

    .small {
      font-size: 16px;
      color: var(--muted);
    }

    .btn-ghost {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text);
      padding: 8px 12px;
      border-radius: var(--radius);
      font-size: 14px;
      transition: all 0.2s ease;
    }

    .btn-ghost:active {
      background: rgba(255, 255, 255, 0.05);
    }

    .stats {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 16px;
    }

    .pill {
      background: rgba(255, 255, 255, 0.05);
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .pill span {
      font-weight: 600;
      color: var(--text-light);
    }

    .study-actions {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
      margin-top: 16px;
    }

    @media (max-width: 500px) {
      .study-actions {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    .rate-btn {
      flex: 1;
      padding: 12px 8px;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      font-weight: 500;
      color: white;
      transition: all 0.2s ease;
      font-size: 14px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 60px;
    }

    .rate-btn:active {
      transform: scale(0.96);
    }

    .rate-btn small {
      font-size: 11px;
      opacity: 0.8;
      margin-top: 2px;
    }

    .again {
      background: var(--danger);
    }

    .hard {
      background: var(--warning);
    }

    .good {
      background: var(--success);
    }

    .easy {
      background: var(--info);
    }

    footer {
      margin-top: 24px;
      color: var(--muted);
      font-size: 13px;
      text-align: center;
      padding: 12px 0;
    }

    .search {
      width: 100%;
      padding: 10px 14px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.03);
      color: var(--text);
      font-size: 14px;
      margin-bottom: 16px;
      transition: all 0.2s ease;
    }

    .search:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.2);
    }

    .list-item {
      padding: 14px;
      border-radius: var(--radius);
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid var(--border);
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.2s ease;
    }

    .list-item:active {
      transform: scale(0.98);
    }

    .action-buttons {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }

    .action-buttons button {
      flex: 1;
      min-width: 120px;
    }

    .empty-state {
      text-align: center;
      padding: 20px;
      color: var(--muted);
    }

    /* Mobile optimizations */
    @media (max-width: 600px) {
      .app {
        padding: 12px;
      }

      header {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
      }

      .controls {
        margin-left: 0;
        width: 100%;
      }

      .controls button {
        flex: 1;
        min-width: 0;
      }

      .card-preview {
        height: 180px;
      }

      .big {
        font-size: 24px;
      }

      .small {
        font-size: 15px;
      }

      .rate-btn {
        padding: 10px 6px;
        font-size: 13px;
        min-height: 50px;
      }
    }

    /* Animation for new card */
    @keyframes cardIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .card-enter {
      animation: cardIn 0.3s ease-out;
    }

    /* Pulse animation for buttons */
    @keyframes pulse {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
      100% {
        transform: scale(1);
      }
    }

    .pulse {
      animation: pulse 1.5s infinite;
    }
  </style>
</head>

<body>
  <div class="app">
    <header>
      <div>
        <h1>VocabSR â€” Spaced Repetition</h1>
        <div class="muted">Belajar kosakata dengan teknik pengulangan bertahap</div>
      </div>
      <div class="controls">
        <label for="filein" class="btn-ghost">Import CSV</label>
        <input id="filein" type="file" accept=".csv" style="display:none">
        <button id="export">Export CSV</button>
        <button id="reset" style="background: var(--danger)">Reset</button>
      </div>
    </header>

    <div class="grid">
      <div class="panel">
        <input id="search" class="search" placeholder="Cari kata atau arti..." />

        <div class="stats">
          <div class="pill">Total: <span id="total">0</span></div>
          <div class="pill">Hari ini: <span id="due">0</span></div>
          <div class="pill">Baru: <span id="new">0</span></div>
          <div class="pill">Dipelajari: <span id="studied">0</span></div>
        </div>

        <div class="deck-list" id="list"></div>
      </div>

      <div class="panel">
        <div class="card-preview">
          <div class="card" id="card">
            <div class="card-face card-front">
              <div style="text-align:center; padding: 20px;">
                <div class="big" id="front">Siap belajar?</div>
              </div>
            </div>
            <div class="card-face card-back">
              <div style="text-align:center; padding: 20px;">
                <div class="big" id="back"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="action-buttons">
          <button id="flip" class="btn-ghost">Balik (Space)</button>
          <button id="skip" class="btn-ghost">Lewati</button>
          <button id="studyNext" class="btn-ghost" style="background: var(--accent); color: #022;">
            Mulai Belajar
          </button>
        </div>

        <div id="studyPanel" style="display:none">
          <div style="margin-bottom:12px" class="muted">Seberapa baik Anda mengingatnya?</div>
          <div class="study-actions">
            <button class="rate-btn again" data-score="0">
              Lupa
              <small>(1)</small>
            </button>
            <button class="rate-btn hard" data-score="3">
              Susah
              <small>(2)</small>
            </button>
            <button class="rate-btn good" data-score="4">
              Bagus
              <small>(3)</small>
            </button>
            <button class="rate-btn easy" data-score="5">
              Mudah
              <small>(4)</small>
            </button>
          </div>
        </div>

        <div style="margin-top:16px">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
            <div class="muted">Daftar kosakata</div>
          </div>

          <div id="deckPreviewList" style="max-height:180px;overflow:auto"></div>
        </div>
      </div>
    </div>

    <footer>
      <p>VocabSR menggunakan algoritma SM-2 (sama seperti Anki) untuk penjadwalan pengulangan.</p>
    </footer>
  </div>

  <script>
    // --- Core: simple SM-2 implementation and data management ---
    const STORAGE_KEY = 'vocabsr:deck';
    let deck = [];
    let queue = [];
    let current = null;

    function todayDate() {
      const d = new Date();
      d.setHours(0, 0, 0, 0);
      return d.getTime();
    }

    function loadFromStorage() {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (raw) {
        try {
          deck = JSON.parse(raw);
          // Initialize missing properties
          deck = deck.map(card => ({
            front: card.front || '',
            back: card.back || '',
            id: card.id || Date.now() + Math.random(),
            interval: card.interval || 0,
            repetition: card.repetition || 0,
            ef: card.ef || 2.5,
            due: card.due || todayDate(),
            easeHistory: card.easeHistory || [],
            history: card.history || []
          }));
        } catch (e) {
          console.error('Error parsing storage', e);
          deck = [];
          seedSampleDeck();
        }
      } else {
        seedSampleDeck();
      }
    }

    function seedSampleDeck() {
      const sample = [
        ['ask', 'meminta/tanya'], ['become', 'menjadi'], ['begin', 'memulai'], ['believe', 'percaya'], ['bring', 'membawa'],
        ['build', 'membangun'], ['buy', 'membeli'], ['call', 'memanggil'], ['can', 'bisa'], ['change', 'mengubah'],
        ['choose', 'memilih'], ['come', 'datang'], ['commit', 'mengkomit'], ['compare', 'membandingkan'], ['complete', 'menyelesaikan'],
        ['consider', 'mempertimbangkan'], ['create', 'mencipta'], ['decide', 'memutuskan'], ['do', 'melakukan'], ['draw', 'menggambar'],
        ['drive', 'mengemudi'], ['eat', 'makan'], ['end', 'mengakhiri'], ['explain', 'menjelaskan'], ['feel', 'merasa'],
        ['find', 'menemukan'], ['follow', 'mengikuti'], ['get', 'mendapatkan'], ['give', 'memberi'], ['go', 'pergi'],
        ['grow', 'tumbuh'], ['have', 'punya'], ['help', 'membantu'], ['hold', 'menahan'], ['keep', 'menjaga'],
        ['know', 'tahu'], ['learn', 'belajar'], ['leave', 'meninggalkan'], ['let', 'membiarkan'], ['like', 'suka'],
        ['listen', 'mendengarkan'], ['live', 'tinggal'], ['look', 'melihat'], ['lose', 'kehilangan'], ['make', 'membuat'],
        ['measure', 'mengukur'], ['meet', 'bertemu'], ['move', 'bergerak'], ['offer', 'menawarkan'], ['open', 'membuka'],
        ['play', 'bermain'], ['put', 'meletakkan'], ['read', 'membaca'], ['remember', 'mengingat'], ['run', 'berlari'],
        ['say', 'mengatakan'], ['see', 'melihat'], ['seem', 'tampak'], ['sell', 'menjual'], ['send', 'mengirim'],
        ['show', 'menunjukkan'], ['sit', 'duduk'], ['sleep', 'tidur'], ['speak', 'berbicara'], ['stand', 'berdiri'],
        ['start', 'memulai'], ['stop', 'berhenti'], ['take', 'mengambil'], ['talk', 'berbicara'], ['teach', 'mengajar'],
        ['tell', 'memberitahu'], ['think', 'berpikir'], ['try', 'mencoba'], ['turn', 'berbalik'], ['understand', 'mengerti'],
        ['use', 'menggunakan'], ['wait', 'menunggu'], ['walk', 'berjalan'], ['want', 'menginginkan'], ['watch', 'menonton'],
        ['work', 'bekerja'], ['write', 'menulis'],
        ['accept', 'menerima'], ['achieve', 'mencapai'], ['advise', 'menyarankan'], ['allow', 'mengizinkan'], ['apply', 'menerapkan'],
        ['argue', 'berdebat'], ['arrive', 'tiba'], ['assume', 'mengasumsikan'], ['avoid', 'menghindari'], ['belong', 'milik'],
        ['borrow', 'meminjam'], ['calculate', 'menghitung'], ['challenge', 'tantangan'], ['change', 'perubahan'], ['charge', 'biaya'],
        ['check', 'memeriksa'], ['claim', 'klaim'], ['compare', 'perbandingan'], ['complain', 'mengeluh'], ['confirm', 'konfirmasi'],
        ['connect', 'menghubungkan'], ['consider', 'pertimbangan'], ['contact', 'kontak'], ['continue', 'melanjutkan'],
        ['contribute', 'berkontribusi'], ['control', 'kontrol'], ['convert', 'mengubah bentuk'], ['correct', 'benar'],
        ['create', 'penciptaan'], ['criticize', 'mengkritik'], ['discuss', 'membahas'], ['accept', 'menerima'], ['achieve', 'mencapai'], ['act', 'bertindak'], ['add', 'menambahkan'], ['admit', 'mengakui'],
        ['agree', 'setuju'], ['allow', 'mengizinkan'], ['announce', 'mengumumkan'], ['answer', 'menjawab'], ['appear', 'muncul'],
        ['apply', 'melamar/menerapkan'], ['approach', 'mendekati'], ['argue', 'berdebat'], ['arrange', 'mengatur'], ['arrive', 'tiba'],
        ['attack', 'menyerang'], ['attempt', 'mencoba'], ['attend', 'menghadiri'], ['attract', 'menarik'], ['avoid', 'menghindari'],
        ['awake', 'bangun'], ['bake', 'memanggang'], ['balance', 'menyeimbangkan'], ['ban', 'melarang'], ['bark', 'menggonggong'],
        ['bathe', 'mandi'], ['battle', 'bertempur'], ['beat', 'memukul'], ['beg', 'memohon'], ['behave', 'berperilaku'],
        ['bend', 'membengkokkan'], ['bet', 'bertaruh'], ['bite', 'menggigit'], ['blame', 'menyalahkan'], ['bless', 'memberkati'],
        ['blow', 'meniup'], ['boil', 'merebus'], ['borrow', 'meminjam'], ['bounce', 'memantul'], ['bow', 'membungkuk'],
        ['break', 'memecahkan'], ['breathe', 'bernapas'], ['burn', 'membakar'], ['bury', 'mengubur'], ['calculate', 'menghitung'],
        ['capture', 'menangkap'], ['care', 'peduli'], ['carry', 'membawa'], ['catch', 'menangkap'], ['cause', 'menyebabkan'],
        ['celebrate', 'merayakan'], ['challenge', 'menantang'], ['chase', 'mengejar'], ['check', 'memeriksa'], ['cheer', 'bersorak'],
        ['chew', 'mengunyah'], ['clean', 'membersihkan'], ['climb', 'memanjat'], ['close', 'menutup'], ['coach', 'melatih'],
        ['collect', 'mengumpulkan'], ['combine', 'menggabungkan'], ['communicate', 'berkomunikasi'], ['compete', 'berkompetisi'], ['complain', 'mengeluh'],
        ['concentrate', 'berkonsentrasi'], ['conclude', 'menyimpulkan'], ['conduct', 'melakukan'], ['confirm', 'mengkonfirmasi'], ['connect', 'menghubungkan'],
        ['continue', 'melanjutkan'], ['control', 'mengontrol'], ['cook', 'memasak'], ['cool', 'mendinginkan'], ['copy', 'menyalin'],
        ['cost', 'berharga'], ['count', 'menghitung'], ['cover', 'menutupi'], ['crack', 'retak'], ['crash', 'menabrak'],
        ['crawl', 'merangkak'], ['cross', 'menyeberang'], ['cry', 'menangis'], ['cut', 'memotong'], ['damage', 'merusak'],
        ['dance', 'menari'], ['dare', 'berani'], ['deal', 'berurusan'], ['deliver', 'mengirim'], ['demand', 'menuntut'],
        ['depend', 'bergantung'], ['describe', 'menggambarkan'], ['design', 'merancang'], ['destroy', 'menghancurkan'], ['develop', 'mengembangkan'],
        ['die', 'mati'], ['dig', 'menggali'], ['direct', 'mengarahkan'], ['disappear', 'menghilang'], ['discover', 'menemukan'],
        ['discuss', 'mendiskusikan'], ['divide', 'membagi'], ['doubt', 'meragukan'], ['download', 'mengunduh'], ['drag', 'menyeret'],
        ['dream', 'bermimpi'], ['dress', 'berpakaian'], ['drink', 'minum'], ['drop', 'menjatuhkan'], ['drown', 'tenggelam'],
        ['earn', 'mendapatkan'], ['educate', 'mendidik'], ['elect', 'memilih'], ['employ', 'mempekerjakan'], ['encourage', 'mendorong'],
        ['engage', 'melibatkan'], ['enjoy', 'menikmati'], ['enter', 'masuk'], ['escape', 'melarikan diri'], ['establish', 'mendirikan'],
        ['evaluate', 'mengevaluasi'], ['examine', 'memeriksa'], ['exchange', 'menukar'], ['excuse', 'memaafkan'], ['execute', 'mengeksekusi'],
        ['exercise', 'berolahraga'], ['exist', 'ada'], ['expand', 'memperluas'], ['expect', 'mengharapkan'], ['experience', 'mengalami'],
        ['experiment', 'bereksperimen'], ['explore', 'menjelajahi'], ['express', 'mengungkapkan'], ['extend', 'memperpanjang'], ['face', 'menghadapi'],
        ['fail', 'gagal'], ['fall', 'jatuh'], ['farm', 'bertani'], ['fear', 'takut'], ['feed', 'memberi makan'],
        ['fetch', 'mengambil'], ['fight', 'berkelahi'], ['fill', 'mengisi'], ['finance', 'membiayai'], ['finish', 'menyelesaikan'],
        ['fire', 'memecat'], ['fish', 'memancing'], ['fit', 'cocok'], ['fix', 'memperbaiki'], ['flee', 'melarikan diri'],
        ['fly', 'terbang'], ['focus', 'fokus'], ['fold', 'melipat'], ['force', 'memaksa'], ['forget', 'lupa'],
        ['forgive', 'memaafkan'], ['form', 'membentuk'], ['freeze', 'membeku'], ['frighten', 'menakuti'], ['fry', 'menggoreng'],
        ['fund', 'mendanai'], ['gain', 'memperoleh'], ['gamble', 'berjudi'], ['gather', 'berkumpul'], ['generate', 'menghasilkan'],
        ['grab', 'meraih'], ['graduate', 'lulus'], ['grant', 'memberikan'], ['greet', 'menyapa'], ['grind', 'menggiling'],
        ['guard', 'menjaga'], ['guess', 'menebak'], ['guide', 'membimbing'], ['handle', 'menangani'], ['hang', 'menggantung'],
        ['happen', 'terjadi'], ['hate', 'benci'], ['heal', 'menyembuhkan'], ['hear', 'mendengar'], ['heat', 'memanaskan'],
        ['hide', 'bersembunyi'], ['hire', 'mempekerjakan'], ['hit', 'memukul'], ['hope', 'berharap'], ['hunt', 'berburu'],
        ['hurry', 'terburu-buru'], ['hurt', 'menyakiti'], ['identify', 'mengidentifikasi'], ['ignore', 'mengabaikan'], ['imagine', 'membayangkan'],
        ['impact', 'berdampak'], ['implement', 'menerapkan'], ['imply', 'menyiratkan'], ['import', 'mengimpor'], ['improve', 'meningkatkan'],
        ['include', 'termasuk'], ['increase', 'meningkat'], ['indicate', 'menunjukkan'], ['influence', 'mempengaruhi'], ['inform', 'memberitahu'],
        ['inject', 'menyuntik'], ['injure', 'melukai'], ['insert', 'memasukkan'], ['inspect', 'memeriksa'], ['install', 'memasang'],
        ['instruct', 'menginstruksikan'], ['intend', 'bermaksud'], ['interest', 'menarik'], ['interrupt', 'mengganggu'], ['introduce', 'memperkenalkan'],
        ['invent', 'menemukan'], ['invest', 'berinvestasi'], ['invite', 'mengundang'], ['involve', 'melibatkan'], ['iron', 'menyetrika'],
        ['join', 'bergabung'], ['joke', 'bercanda'], ['judge', 'menilai'], ['jump', 'melompat'], ['justify', 'membenarkan'],
        ['kick', 'menendang'], ['kill', 'membunuh'], ['kiss', 'mencium'], ['knock', 'mengetuk'], ['lack', 'kekurangan'],
        ['land', 'mendarat'], ['last', 'bertahan'], ['laugh', 'tertawa'], ['launch', 'meluncurkan'], ['lead', 'memimpin'],
        ['lean', 'bersandar'], ['leap', 'melompat'], ['lend', 'meminjamkan'], ['lie', 'berbohong'], ['lift', 'mengangkat'],
        ['light', 'menyalakan'], ['limit', 'membatasi'], ['link', 'menghubungkan'], ['load', 'memuat'], ['loan', 'meminjamkan'],
        ['lock', 'mengunci'], ['log', 'mencatat'], ['love', 'mencintai'], ['lower', 'menurunkan'], ['maintain', 'memelihara'],
        ['manage', 'mengelola'], ['manufacture', 'memproduksi'], ['map', 'memetakan'], ['march', 'berbaris'], ['mark', 'menandai'],
        ['marry', 'menikah'], ['match', 'mencocokkan'], ['matter', 'penting'], ['melt', 'meleleh'], ['memorize', 'menghafal'],
        ['mention', 'menyebutkan'], ['mind', 'keberatan'], ['mine', 'menambang'], ['miss', 'merindukan'], ['mix', 'mencampur'],
        ['model', 'memodelkan'], ['modify', 'memodifikasi'], ['monitor', 'memantau'], ['motivate', 'memotivasi'], ['mount', 'naik'],
        ['murder', 'membunuh'], ['nail', 'memaku'], ['name', 'menamakan'], ['need', 'butuh'], ['negotiate', 'bernegosiasi'],
        ['note', 'mencatat'], ['notice', 'memperhatikan'], ['notify', 'memberitahu'], ['nurse', 'merawat'], ['obey', 'mematuhi'],
        ['object', 'keberatan'], ['observe', 'mengamati'], ['obtain', 'memperoleh'], ['occupy', 'menempati'], ['occur', 'terjadi'],
        ['operate', 'mengoperasikan'], ['oppose', 'menentang'], ['order', 'memesan'], ['organize', 'mengatur'], ['own', 'memiliki'],
        ['pack', 'mengemas'], ['paint', 'mengecat'], ['park', 'parkir'], ['pass', 'lewat'], ['paste', 'menempel'],
        ['pat', 'menepuk'], ['pause', 'berhenti'], ['pay', 'membayar'], ['peel', 'mengupas'], ['perform', 'melakukan'],
        ['permit', 'mengizinkan'], ['pick', 'memilih'], ['picture', 'membayangkan'], ['place', 'menempatkan'], ['plan', 'merencanakan'],
        ['plant', 'menanam'], ['play', 'bermain'], ['please', 'menyenangkan'], ['plug', 'mencolok'], ['point', 'menunjuk'],
        ['polish', 'memoles'], ['possess', 'memiliki'], ['post', 'mengirim'], ['pour', 'menuang'], ['practice', 'berlatih'],
        ['praise', 'memuji'], ['pray', 'berdoa'], ['predict', 'memprediksi'], ['prefer', 'lebih suka'], ['prepare', 'mempersiapkan'],
        ['present', 'mempresentasikan'], ['preserve', 'melestarikan'], ['press', 'menekan'], ['pretend', 'berpura-pura'], ['prevent', 'mencegah'],
        ['print', 'mencetak'], ['process', 'memproses'], ['produce', 'memproduksi'], ['program', 'memprogram'], ['promise', 'berjanji'],
        ['protect', 'melindungi'], ['protest', 'memprotes'], ['prove', 'membuktikan'], ['provide', 'menyediakan'], ['publish', 'menerbitkan'],
        ['pull', 'menarik'], ['punish', 'menghukum'], ['purchase', 'membeli'], ['push', 'mendorong'], ['put', 'meletakkan'],
        ['qualify', 'memenuhi syarat'], ['question', 'mempertanyakan'], ['quit', 'berhenti'], ['quote', 'mengutip'], ['race', 'berlomba'],
        ['raise', 'mengangkat'], ['rank', 'menilai'], ['reach', 'mencapai'], ['read', 'membaca'], ['realize', 'menyadari'],
        ['reason', 'beralasan'], ['receive', 'menerima'], ['recognize', 'mengenali'], ['recommend', 'merekomendasikan'], ['record', 'merekam'],
        ['recover', 'pulih'], ['reduce', 'mengurangi'], ['refer', 'merujuk'], ['reflect', 'merefleksikan'], ['refuse', 'menolak'],
        ['register', 'mendaftar'], ['regret', 'menyesal'], ['reject', 'menolak'], ['relate', 'berhubungan'], ['relax', 'santai'],
        ['release', 'melepaskan'], ['rely', 'mengandalkan'], ['remain', 'tetap'], ['remember', 'ingat'], ['remind', 'mengingatkan'],
        ['remove', 'menghapus'], ['repair', 'memperbaiki'], ['repeat', 'mengulangi'], ['replace', 'mengganti'], ['reply', 'membalas'],
        ['report', 'melaporkan'], ['represent', 'mewakili'], ['request', 'meminta'], ['require', 'memerlukan'], ['rescue', 'menyelamatkan'],
        ['research', 'meneliti'], ['reserve', 'memesan'], ['resist', 'menahan'], ['resolve', 'menyelesaikan'], ['respect', 'menghormati'],
        ['respond', 'merespons'], ['rest', 'istirahat'], ['result', 'menghasilkan'], ['return', 'kembali'], ['reveal', 'mengungkap'],
        ['review', 'meninjau'], ['reward', 'memberi hadiah'], ['ride', 'naik'], ['ring', 'berdering'], ['rise', 'naik'],
        ['risk', 'berisiko'], ['rob', 'merampok'], ['rock', 'menggoyangkan'], ['roll', 'menggulung'], ['rub', 'menggosok'],
        ['rule', 'memerintah'], ['run', 'lari'], ['rush', 'terburu-buru'], ['sail', 'berlayar'], ['satisfy', 'memuaskan'],
        ['save', 'menyimpan'], ['say', 'berkata'], ['scan', 'memindai'], ['scare', 'menakuti'], ['schedule', 'menjadwalkan'],
        ['score', 'mencetak'], ['scream', 'berteriak'], ['search', 'mencari'], ['secure', 'mengamankan'], ['see', 'melihat'],
        ['seek', 'mencari'], ['seem', 'tampak'], ['select', 'memilih'], ['sell', 'menjual'], ['send', 'mengirim'],
        ['sense', 'merasakan'], ['separate', 'memisahkan'], ['serve', 'melayani'], ['set', 'mengatur'], ['settle', 'menyelesaikan'],
        ['sew', 'menjahit'], ['shake', 'mengguncang'], ['share', 'berbagi'], ['shine', 'bersinar'], ['ship', 'mengirim'],
        ['shock', 'mengejutkan'], ['shoot', 'menembak'], ['shop', 'berbelanja'], ['show', 'menunjukkan'], ['shut', 'menutup'],
        ['sign', 'menandatangani'], ['sing', 'bernyanyi'], ['sink', 'tenggelam'], ['sit', 'duduk'], ['ski', 'bermain ski'],
        ['skip', 'melompati'], ['sleep', 'tidur'], ['slide', 'meluncur'], ['slip', 'tergelincir'], ['slow', 'memperlambat'],
        ['smell', 'mencium'], ['smile', 'tersenyum'], ['smoke', 'merokok'], ['snap', 'mematahkan'], ['snow', 'bersalju'],
        ['solve', 'memecahkan'], ['sort', 'menyortir'], ['sound', 'berbunyi'], ['spare', 'menyisihkan'], ['speak', 'berbicara'],
        ['spell', 'mengeja'], ['spend', 'menghabiskan'], ['spin', 'berputar'], ['split', 'membelah'], ['spoil', 'merusak'],
        ['sponsor', 'mensponsori'], ['spread', 'menyebar'], ['squeeze', 'meremas'], ['stab', 'menikam'], ['stain', 'menodai'],
        ['stand', 'berdiri'], ['stare', 'menatap'], ['start', 'mulai'], ['stay', 'tinggal'], ['steal', 'mencuri'],
        ['steam', 'mengukus'], ['step', 'melangkah'], ['stick', 'menempel'], ['stir', 'mengaduk'], ['stop', 'berhenti'],
        ['store', 'menyimpan'], ['stretch', 'meregangkan'], ['strike', 'memukul'], ['struggle', 'berjuang'], ['study', 'belajar'],
        ['submit', 'menyerahkan'], ['succeed', 'berhasil'], ['suck', 'menghisap'], ['suffer', 'menderita'], ['suggest', 'menyarankan'],
        ['suit', 'cocok'], ['supply', 'menyuplai'], ['support', 'mendukung'], ['suppose', 'mengandaikan'], ['surprise', 'mengejutkan'],
        ['surround', 'mengelilingi'], ['survive', 'bertahan hidup'], ['suspect', 'mencurigai'], ['swallow', 'menelan'], ['swear', 'bersumpah'],
        ['sweep', 'menyapu'], ['swim', 'berenang'], ['swing', 'berayun'], ['switch', 'mengganti'], ['take', 'mengambil'],
        ['talk', 'berbicara'], ['taste', 'merasakan'], ['teach', 'mengajar'], ['tear', 'merobek'], ['tell', 'memberitahu'],
        ['test', 'menguji'], ['thank', 'berterima kasih'], ['think', 'berpikir'], ['throw', 'melempar'], ['tie', 'mengikat'],
        ['time', 'mengatur waktu'], ['tip', 'memberi tip'], ['tire', 'lelah'], ['touch', 'menyentuh'], ['tour', 'berkeliling'],
        ['track', 'melacak'], ['trade', 'berdagang'], ['train', 'melatih'], ['transfer', 'mentransfer'], ['transform', 'mengubah'],
        ['translate', 'menerjemahkan'], ['transport', 'mengangkut'], ['trap', 'menjebak'], ['travel', 'bepergian'], ['treat', 'memperlakukan'],
        ['trip', 'tersandung'], ['trust', 'mempercayai'], ['try', 'mencoba'], ['turn', 'berubah'], ['type', 'mengetik'],
        ['underline', 'menggarisbawahi'], ['understand', 'memahami'], ['unite', 'menyatukan'], ['unlock', 'membuka kunci'], ['unpack', 'membongkar'],
        ['update', 'memperbarui'], ['upgrade', 'meningkatkan'], ['upload', 'mengunggah'], ['use', 'menggunakan'], ['vacation', 'berlibur'],
        ['value', 'menghargai'], ['vary', 'bervariasi'], ['view', 'melihat'], ['visit', 'mengunjungi'], ['vote', 'memilih'],
        ['wait', 'menunggu'], ['wake', 'bangun'], ['walk', 'berjalan'], ['want', 'ingin'], ['warm', 'menghangatkan'],
        ['warn', 'memperingatkan'], ['wash', 'mencuci'], ['waste', 'membuang'], ['watch', 'menonton'], ['wave', 'melambai'],
        ['wear', 'memakai'], ['weigh', 'menimbang'], ['welcome', 'menyambut'], ['whisper', 'berbisik'], ['win', 'menang'],
        ['wipe', 'mengelap'], ['wish', 'berharap'], ['wonder', 'bertanya-tanya'], ['work', 'bekerja'], ['worry', 'khawatir'],
        ['wrap', 'membungkus'], ['write', 'menulis'], ['yell', 'berteriak'], ['zip', 'mengunci ritsleting'],

        // Essential nouns and other vocabulary (400+ words)
        ['time', 'waktu'], ['person', 'orang'], ['year', 'tahun'], ['way', 'cara'], ['day', 'hari'],
        ['thing', 'hal'], ['man', 'pria'], ['world', 'dunia'], ['life', 'hidup'], ['hand', 'tangan'],
        ['part', 'bagian'], ['child', 'anak'], ['eye', 'mata'], ['woman', 'wanita'], ['place', 'tempat'],
        ['work', 'pekerjaan'], ['week', 'minggu'], ['case', 'kasus'], ['point', 'poin'], ['government', 'pemerintah'],
        ['company', 'perusahaan'], ['number', 'nomor'], ['group', 'kelompok'], ['problem', 'masalah'], ['fact', 'fakta'],
        ['right', 'kanan/benar'], ['water', 'air'], ['food', 'makanan'], ['money', 'uang'], ['story', 'cerita'],
        ['month', 'bulan'], ['lot', 'banyak'], ['study', 'studi'], ['book', 'buku'], ['job', 'pekerjaan'],
        ['word', 'kata'], ['business', 'bisnis'], ['issue', 'masalah'], ['side', 'sisi'], ['kind', 'jenis'],
        ['head', 'kepala'], ['house', 'rumah'], ['service', 'layanan'], ['friend', 'teman'], ['father', 'ayah'],
        ['power', 'kekuatan'], ['hour', 'jam'], ['game', 'permainan'], ['line', 'garis'], ['end', 'akhir'],
        ['member', 'anggota'], ['law', 'hukum'], ['car', 'mobil'], ['city', 'kota'], ['community', 'komunitas'],
        ['name', 'nama'], ['president', 'presiden'], ['team', 'tim'], ['minute', 'menit'], ['idea', 'ide'],
        ['kid', 'anak'], ['body', 'tubuh'], ['information', 'informasi'], ['back', 'belakang'], ['parent', 'orang tua'],
        ['face', 'wajah'], ['others', 'lainnya'], ['level', 'tingkat'], ['office', 'kantor'], ['door', 'pintu'],
        ['health', 'kesehatan'], ['person', 'orang'], ['art', 'seni'], ['war', 'perang'], ['history', 'sejarah'],
        ['party', 'pesta'], ['result', 'hasil'], ['change', 'perubahan'], ['morning', 'pagi'], ['reason', 'alasan'],
        ['research', 'penelitian'], ['girl', 'gadis'], ['guy', 'pria'], ['moment', 'momen'], ['air', 'udara'],
        ['teacher', 'guru'], ['force', 'kekuatan'], ['education', 'pendidikan'], ['foot', 'kaki'], ['boy', 'anak laki-laki'],
        ['age', 'umur'], ['policy', 'kebijakan'], ['process', 'proses'], ['music', 'musik'], ['market', 'pasar'],
        ['sense', 'akal'], ['nation', 'bangsa'], ['plan', 'rencana'], ['college', 'kuliah'], ['interest', 'minat'],
        ['death', 'kematian'], ['course', 'kursus'], ['someone', 'seseorang'], ['experience', 'pengalaman'], ['behind', 'di belakang'],
        ['reach', 'jangkauan'], ['local', 'lokal'], ['kill', 'pembunuhan'], ['remain', 'sisa'], ['effect', 'efek'],
        ['yeah', 'ya'], ['suggest', 'saran'], ['class', 'kelas'], ['control', 'kontrol'], ['raise', 'kenaikan'],
        ['care', 'perawatan'], ['perhaps', 'mungkin'], ['little', 'sedikit'], ['late', 'terlambat'], ['hard', 'sulit'],
        ['field', 'bidang'], ['else', 'lain'], ['pass', 'lulus'], ['former', 'mantan'], ['sell', 'jual'],
        ['major', 'utama'], ['sometimes', 'kadang-kadang'], ['require', 'butuh'], ['along', 'sepanjang'], ['development', 'perkembangan'],
        ['themselves', 'mereka sendiri'], ['report', 'laporan'], ['role', 'peran'], ['better', 'lebih baik'], ['economic', 'ekonomi'],
        ['effort', 'usaha'], ['up', 'atas'], ['decide', 'keputusan'], ['rate', 'tingkat'], ['strong', 'kuat'],
        ['possible', 'mungkin'], ['heart', 'hati'], ['drug', 'obat'], ['show', 'pertunjukan'], ['leader', 'pemimpin'],
        ['light', 'cahaya'], ['voice', 'suara'], ['wife', 'istri'], ['whole', 'keseluruhan'], ['police', 'polisi'],
        ['mind', 'pikiran'], ['finally', 'akhirnya'], ['pull', 'tarikan'], ['return', 'kembali'], ['free', 'gratis'],
        ['military', 'militer'], ['price', 'harga'], ['report', 'laporan'], ['less', 'kurang'], ['according', 'menurut'],
        ['decision', 'keputusan'], ['explain', 'penjelasan'], ['son', 'anak laki-laki'], ['hope', 'harapan'], ['even', 'bahkan'],
        ['develop', 'pengembangan'], ['view', 'pandangan'], ['relationship', 'hubungan'], ['carry', 'bawa'], ['town', 'kota'],
        ['road', 'jalan'], ['drive', 'berkendara'], ['arm', 'lengan'], ['true', 'benar'], ['federal', 'federal'],
        ['break', 'istirahat'], ['difference', 'perbedaan'], ['thank', 'terima kasih'], ['receive', 'terima'], ['value', 'nilai'],
        ['international', 'internasional'], ['building', 'bangunan'], ['action', 'tindakan'], ['full', 'penuh'], ['model', 'model'],
        ['join', 'bergabung'], ['season', 'musim'], ['society', 'masyarakat'], ['because', 'karena'], ['tax', 'pajak'],
        ['director', 'direktur'], ['early', 'awal'], ['position', 'posisi'], ['player', 'pemain'], ['agree', 'setuju'],
        ['especially', 'terutama'], ['record', 'catatan'], ['pick', 'pilih'], ['wear', 'pakai'], ['paper', 'kertas'],
        ['special', 'khusus'], ['space', 'ruang'], ['ground', 'tanah'], ['form', 'bentuk'], ['support', 'dukungan'],
        ['event', 'acara'], ['official', 'resmi'], ['whose', 'yang'], ['matter', 'masalah'], ['everyone', 'semua orang'],
        ['center', 'pusat'], ['couple', 'pasangan'], ['site', 'situs'], ['end', 'ujung'], ['project', 'proyek'],
        ['hit', 'pukulan'], ['base', 'dasar'], ['activity', 'aktivitas'], ['star', 'bintang'], ['table', 'meja'],
        ['need', 'kebutuhan'], ['court', 'pengadilan'], ['produce', 'produk'], ['eat', 'makan'], ['American', 'Amerika'],
        ['teach', 'ajar'], ['oil', 'minyak'], ['half', 'setengah'], ['situation', 'situasi'], ['easy', 'mudah'],
        ['cost', 'biaya'], ['industry', 'industri'], ['figure', 'angka'], ['face', 'hadapi'], ['street', 'jalan'],
        ['image', 'gambar'], ['itself', 'itu sendiri'], ['phone', 'telepon'], ['either', 'juga'], ['data', 'data'],
        ['cover', 'sampul'], ['quite', 'cukup'], ['picture', 'gambar'], ['clear', 'jelas'], ['practice', 'praktik'],
        ['piece', 'bagian'], ['land', 'tanah'], ['recent', 'baru-baru ini'], ['describe', 'gambarkan'], ['product', 'produk'],
        ['doctor', 'dokter'], ['wall', 'dinding'], ['patient', 'pasien'], ['worker', 'pekerja'], ['news', 'berita'],
        ['test', 'tes'], ['movie', 'film'], ['certain', 'tertentu'], ['north', 'utara'], ['love', 'cinta'],
        ['personal', 'pribadi'], ['open', 'buka'], ['support', 'dukung'], ['simply', 'sederhana'], ['third', 'ketiga'],
        ['technology', 'teknologi'], ['catch', 'tangkap'], ['step', 'langkah'], ['baby', 'bayi'], ['computer', 'komputer'],
        ['type', 'jenis'], ['attention', 'perhatian'], ['draw', 'gambar'], ['film', 'film'], ['Republican', 'Republik'],
        ['tree', 'pohon'], ['source', 'sumber'], ['red', 'merah'], ['nearly', 'hampir'], ['organization', 'organisasi'],
        ['choose', 'pilih'], ['cause', 'sebab'], ['hair', 'rambut'], ['look', 'lihat'], ['point', 'titik'],
        ['century', 'abad'], ['evidence', 'bukti'], ['window', 'jendela'], ['difficult', 'sulit'], ['listen', 'dengar'],
        ['soon', 'segera'], ['culture', 'budaya'], ['billion', 'miliar'], ['chance', 'kesempatan'], ['brother', 'saudara laki-laki'],
        ['energy', 'energi'], ['period', 'periode'], ['course', 'tentu saja'], ['summer', 'musim panas'], ['less', 'kurang'],
        ['realize', 'sadar'], ['hundred', 'ratus'], ['available', 'tersedia'], ['plant', 'tanaman'], ['likely', 'kemungkinan'],
        ['opportunity', 'kesempatan'], ['term', 'istilah'], ['short', 'pendek'], ['letter', 'surat'], ['condition', 'kondisi'],
        ['choice', 'pilihan'], ['place', 'tempat'], ['single', 'tunggal'], ['rule', 'aturan'], ['daughter', 'anak perempuan'],
        ['administration', 'administrasi'], ['south', 'selatan'], ['husband', 'suami'], ['Congress', 'Kongres'], ['floor', 'lantai'],
        ['campaign', 'kampanye'], ['material', 'bahan'], ['population', 'populasi'], ['well', 'baik'], ['call', 'panggilan'],
        ['economy', 'ekonomi'], ['medical', 'medis'], ['hospital', 'rumah sakit'], ['church', 'gereja'], ['close', 'tutup'],
        ['thousand', 'ribu'], ['risk', 'risiko'], ['current', 'saat ini'], ['fire', 'api'], ['future', 'masa depan'],
        ['wrong', 'salah'], ['involve', 'libatkan'], ['defense', 'pertahanan'], ['anyone', 'siapa pun'], ['increase', 'peningkatan'],
        ['security', 'keamanan'], ['bank', 'bank'], ['myself', 'diri saya'], ['certainly', 'tentu'], ['west', 'barat'],
        ['sport', 'olahraga'], ['board', 'papan'], ['seek', 'cari'], ['per', 'per'], ['subject', 'subjek'],
        ['officer', 'petugas'], ['private', 'pribadi'], ['rest', 'sisanya'], ['behavior', 'perilaku'], ['deal', 'kesepakatan'],
        ['performance', 'kinerja'], ['fight', 'pertarungan'], ['throw', 'lempar'], ['top', 'atas'], ['quickly', 'cepat'],
        ['past', 'masa lalu'], ['goal', 'tujuan'], ['second', 'kedua'], ['bed', 'tempat tidur'], ['order', 'pesanan'],
        ['author', 'penulis'], ['fill', 'isi'], ['represent', 'wakil'], ['focus', 'fokus'], ['foreign', 'asing'],
        ['drop', 'jatuh'], ['plan', 'rencana'], ['blood', 'darah'], ['upon', 'di atas'], ['agency', 'agen'],
        ['push', 'dorong'], ['nature', 'alam'], ['color', 'warna'], ['no', 'tidak'], ['recently', 'baru-baru ini'],
        ['store', 'toko'], ['reduce', 'kurangi'], ['sound', 'suara'], ['note', 'catatan'], ['fine', 'baik'],
        ['before', 'sebelum'], ['near', 'dekat'], ['movement', 'gerakan'], ['page', 'halaman'], ['enter', 'masuk'],
        ['share', 'bagian'], ['than', 'daripada'], ['common', 'umum'], ['poor', 'miskin'], ['other', 'lain'],
        ['natural', 'alami'], ['race', 'ras'], ['concern', 'perhatian'], ['series', 'seri'], ['significant', 'signifikan'],
        ['similar', 'mirip'], ['hot', 'panas'], ['language', 'bahasa'], ['each', 'masing-masing'], ['usually', 'biasanya'],
        ['response', 'respons'], ['dead', 'mati'], ['rise', 'naik'], ['animal', 'hewan'], ['factor', 'faktor'],
        ['decade', 'dekade'], ['article', 'artikel'], ['shoot', 'tembak'], ['east', 'timur'], ['save', 'simpan'],
        ['seven', 'tujuh'], ['artist', 'seniman'], ['away', 'jauh'], ['scene', 'adegan'], ['stock', 'saham'],
        ['career', 'karier'], ['despite', 'meskipun'], ['central', 'pusat'], ['eight', 'delapan'], ['thus', 'dengan demikian'],
        ['treatment', 'pengobatan'], ['beyond', 'di luar'], ['happy', 'senang'], ['exactly', 'persis'], ['protect', 'lindungi'],
        ['approach', 'pendekatan'], ['lie', 'bohong'], ['size', 'ukuran'], ['dog', 'anjing'], ['fund', 'dana'],
        ['serious', 'serius'], ['occur', 'terjadi'], ['media', 'media'], ['ready', 'siap'], ['sign', 'tanda'],
        ['thought', 'pikiran'], ['list', 'daftar'], ['individual', 'individu'], ['simple', 'sederhana'], ['quality', 'kualitas'],
        ['pressure', 'tekanan'], ['accept', 'terima'], ['answer', 'jawaban'], ['resource', 'sumber daya'], ['identify', 'identifikasi'],
        ['left', 'kiri'], ['meeting', 'pertemuan'], ['determine', 'tentukan'], ['prepare', 'siapkan'], ['disease', 'penyakit'],
        ['whatever', 'apa pun'], ['success', 'sukses'], ['argue', 'berdebat'], ['cup', 'cangkir'], ['particularly', 'terutama'],
        ['amount', 'jumlah'], ['ability', 'kemampuan'], ['staff', 'staf'], ['recognize', 'kenali'], ['indicate', 'tunjukkan'],
        ['situation', 'situasi'], ['apply', 'terapkan'], ['compare', 'bandingkan'], ['discuss', 'diskusikan'], ['develop', 'kembangkan'],
        ['increase', 'tingkatkan'], ['maintain', 'pertahankan'], ['improve', 'perbaiki'], ['support', 'dukung'], ['achieve', 'capai'],
        ['create', 'ciptakan'], ['manage', 'kelola'], ['understand', 'pahami'], ['explain', 'jelaskan'], ['describe', 'gambarkan'],
        ['suggest', 'sarankan'], ['decide', 'putuskan'], ['choose', 'pilih'], ['find', 'temukan'], ['accept', 'menerima'], ['achieve', 'mencapai'],['add', 'menambahkan'],
        ['admire', 'mengagumi'],
        ['admit', 'mengakui'],
        ['advise', 'menasihati'],
        ['afford', 'mampu membeli'],
        ['agree', 'setuju'],
        ['allow', 'mengizinkan'],
        ['analyze', 'menganalisis'],
        ['answer', 'menjawab'],
        ['apologize', 'meminta maaf'],
        ['appear', 'muncul'],
        ['apply', 'menerapkan'],
        ['argue', 'berdebat'],
        ['arrange', 'mengatur'],
        ['arrive', 'tiba'],
        ['ask', 'bertanya'],
        ['assist', 'membantu'],
        ['assume', 'mengasumsikan'],
        ['attack', 'menyerang'],
        ['attempt', 'mencoba'],
        ['attend', 'menghadiri'],
        ['attract', 'menarik'],
        ['avoid', 'menghindari'],
        ['balance', 'menyeimbangkan'],
        ['bake', 'memanggang'],
        ['believe', 'percaya'],
        ['belong', 'milik'],
        ['borrow', 'meminjam'],
        ['break', 'memecahkan'],
        ['bring', 'membawa'],
        ['build', 'membangun'],
        ['burn', 'membakar'],
        ['buy', 'membeli'],
        ['call', 'memanggil'],
        ['care', 'peduli'],
        ['carry', 'membawa'],
        ['catch', 'menangkap'],
        ['change', 'mengubah'],
        ['choose', 'memilih'],
        ['clean', 'membersihkan'],
        ['climb', 'memanjat'],
        ['close', 'menutup'],
        ['collect', 'mengumpulkan'],
        ['combine', 'menggabungkan'],
        ['come', 'datang'],
        ['communicate', 'berkomunikasi'],
        ['compare', 'membandingkan'],
        ['complain', 'mengeluh'],
        ['complete', 'menyelesaikan'],
        ['concentrate', 'berkonsentrasi'],
        ['confirm', 'mengonfirmasi'],
        ['connect', 'menghubungkan'],
        ['consider', 'mempertimbangkan'],
        ['consist', 'terdiri dari'],
        ['contain', 'mengandung'],
        ['continue', 'melanjutkan'],
        ['control', 'mengendalikan'],
        ['cook', 'memasak'],
        ['copy', 'menyalin'],
        ['correct', 'membetulkan'],
        ['cost', 'berharga'],
        ['count', 'menghitung'],
        ['cover', 'menutupi'],
        ['create', 'menciptakan'],
        ['cross', 'menyeberang'],
        ['cry', 'menangis'],
        ['cut', 'memotong'],
        ['dance', 'menari'],
        ['deal', 'menangani'],
        ['decide', 'memutuskan'],
        ['deliver', 'mengantarkan'],
        ['depend', 'bergantung'],
        ['describe', 'menggambarkan'],
        ['design', 'merancang'],
        ['destroy', 'menghancurkan'],
        ['develop', 'mengembangkan'],
        ['die', 'mati'],
        ['discover', 'menemukan'],
        ['discuss', 'membahas'],
        ['divide', 'membagi'],
        ['do', 'melakukan'],
        ['draw', 'menggambar'],
        ['dream', 'bermimpi'],
        ['drink', 'minum'],
        ['drive', 'mengemudi'],
        ['drop', 'menjatuhkan'],
        ['eat', 'makan'],
        ['encourage', 'mendorong'],
        ['enjoy', 'menikmati'],
        ['enter', 'memasuki'],
        ['escape', 'melarikan diri'],
        ['examine', 'memeriksa'],
        ['exist', 'ada'],
        ['expect', 'mengharapkan'],
        ['explain', 'menjelaskan'],
        ['explore', 'menjelajahi'],
        ['express', 'mengungkapkan'],
        ['extend', 'memperpanjang'],
        ['face', 'menghadapi'],
        ['fail', 'gagal'],
        ['fall', 'jatuh'],
        ['feed', 'memberi makan'],
        ['feel', 'merasakan'],
        ['fight', 'bertarung'],
        ['fill', 'mengisi'],
        ['find', 'menemukan'],
        ['finish', 'menyelesaikan'],
        ['fit', 'cocok'],
        ['fix', 'memperbaiki'],
        ['fly', 'terbang'],
        ['follow', 'mengikuti'],
        ['forget', 'melupakan'],
        ['forgive', 'memaafkan'],
        ['form', 'membentuk'],
        ['freeze', 'membekukan'],
        ['gain', 'memperoleh'],
        ['gather', 'mengumpulkan'],
        ['give', 'memberi'],
        ['go', 'pergi'],
        ['grow', 'tumbuh'],
        ['guess', 'menebak'],
        ['handle', 'menangani'],
        ['hang', 'menggantung'],
        ['happen', 'terjadi'],
        ['hate', 'membenci'],
        ['have', 'memiliki'],
        ['hear', 'mendengar'],
        ['help', 'membantu'],
        ['hide', 'bersembunyi'],
        ['hit', 'memukul'],
        ['hold', 'memegang'],
        ['hope', 'berharap'],
        ['hunt', 'berburu'],
        ['hurry', 'bergegas'],
        ['identify', 'mengidentifikasi'],
        ['imagine', 'membayangkan'],
        ['improve', 'memperbaiki'],
        ['include', 'termasuk'],
        ['increase', 'meningkatkan'],
        ['influence', 'mempengaruhi'],
        ['inform', 'memberitahu'],
        ['introduce', 'memperkenalkan'],
        ['invite', 'mengundang'],
        ['join', 'bergabung'],
        ['jump', 'melompat'],
        ['keep', 'menyimpan'],
        ['kick', 'menendang'],
        ['kill', 'membunuh'],
        ['kiss', 'mencium'],
        ['knock', 'mengetuk'],
        ['know', 'mengetahui'],
        ['laugh', 'tertawa'],
        ['lead', 'memimpin'],
        ['learn', 'belajar'],
        ['leave', 'meninggalkan'],
        ['lend', 'meminjamkan'],
        ['let', 'membiarkan'],
        ['lie', 'berbohong'],
        ['lift', 'mengangkat'],
        ['like', 'menyukai'],
        ['listen', 'mendengarkan'],
        ['live', 'hidup'],
        ['look', 'melihat'],
        ['lose', 'kehilangan'],
        ['love', 'mencintai'],
        ['make', 'membuat'],
        ['manage', 'mengelola'],
        ['mark', 'menandai'],
        ['marry', 'menikah'],
        ['match', 'mencocokkan'],
        ['mean', 'berarti'],
        ['measure', 'mengukur'],
        ['meet', 'bertemu'],
        ['mention', 'menyebutkan'],
        ['mind', 'mempermasalahkan'],
        ['miss', 'merindukan'],
        ['move', 'bergerak'],
        ['need', 'membutuhkan'],
        ['notice', 'memperhatikan'],
        ['obtain', 'memperoleh'],
        ['occur', 'terjadi'],
        ['offer', 'menawarkan'],
        ['open', 'membuka'],
        ['operate', 'mengoperasikan'],
        ['order', 'memesan'],
        ['organize', 'mengatur'],
        ['overcome', 'mengatasi'],
        ['own', 'memiliki'],
        ['pack', 'mengemas'],
        ['paint', 'melukis'],
        ['participate', 'berpartisipasi'],
        ['pass', 'melewati'],
        ['pay', 'membayar'],
        ['perform', 'melakukan'],
        ['plan', 'merencanakan'],
        ['play', 'bermain'],
        ['point', 'menunjuk'],
        ['possess', 'memiliki'],
        ['practice', 'berlatih'],
        ['prefer', 'lebih suka'],
        ['prepare', 'mempersiapkan'],
        ['present', 'menyajikan'],
        ['press', 'menekan'],
        ['prevent', 'mencegah'],
        ['produce', 'menghasilkan'],
        ['promise', 'berjanji'],
        ['protect', 'melindungi'],
        ['prove', 'membuktikan'],
        ['provide', 'menyediakan'],
        ['pull', 'menarik'],
        ['push', 'mendorong'],
        ['put', 'meletakkan'],
        ['ceremony', 'upacara'],
        ['challenge', 'tantangan'],
        ['champion', 'juara'],
        ['character', 'karakter'],
        ['charity', 'amal'],
        ['chemical', 'kimia'],
        ['choice', 'pilihan'],
        ['circumstance', 'keadaan'],
        ['citizen', 'warga negara'],
        ['civilization', 'peradaban'],
        ['claim', 'mengklaim'],
        ['classroom', 'ruang kelas'],
        ['climate', 'iklim'],
        ['clue', 'petunjuk'],
        ['collapse', 'runtuh'],
        ['colleague', 'rekan kerja'],
        ['comfort', 'kenyamanan'],
        ['command', 'perintah'],
        ['commerce', 'perdagangan'],
        ['committee', 'panitia'],
        ['community', 'komunitas'],
        ['company', 'perusahaan'],
        ['comparison', 'perbandingan'],
        ['competition', 'kompetisi'],
        ['complaint', 'keluhan'],
        ['complex', 'rumit'],
        ['component', 'komponen'],
        ['concept', 'konsep'],
        ['conclusion', 'kesimpulan'],
        ['condition', 'kondisi'],
        ['conference', 'konferensi'],
        ['confidence', 'kepercayaan diri'],
        ['conflict', 'konflik'],
        ['connection', 'hubungan'],
        ['consequence', 'konsekuensi'],
        ['consideration', 'pertimbangan'],
        ['construction', 'konstruksi'],
        ['consumer', 'konsumen'],
        ['contact', 'kontak'],
        ['contest', 'kontes'],
        ['context', 'konteks'],
        ['continent', 'benua'],
        ['contract', 'kontrak'],
        ['contribution', 'kontribusi'],
        ['control', 'kendali'],
        ['conversation', 'percakapan'],
        ['conviction', 'keyakinan'],
        ['cooperation', 'kerja sama'],
        ['corporation', 'perusahaan besar'],
        ['corruption', 'korupsi'],
        ['courage', 'keberanian'],
        ['course', 'kursus'],
        ['court', 'pengadilan'],
        ['cousin', 'sepupu'],
        ['creation', 'ciptaan'],
        ['creature', 'makhluk'],
        ['crime', 'kejahatan'],
        ['crisis', 'krisis'],
        ['criticism', 'kritik'],
        ['crowd', 'kerumunan'],
        ['culture', 'budaya'],
        ['currency', 'mata uang'],
        ['current', 'arus'],
        ['customer', 'pelanggan'],
        ['damage', 'kerusakan'],
        ['danger', 'bahaya'],
        ['data', 'data'],
        ['database', 'basis data'],
        ['deadline', 'batas waktu'],
        ['deal', 'kesepakatan'],
        ['debate', 'perdebatan'],
        ['debt', 'utang'],
        ['decision', 'keputusan'],
        ['definition', 'definisi'],
        ['degree', 'gelar'],
        ['delivery', 'pengiriman'],
        ['demand', 'permintaan'],
        ['democracy', 'demokrasi'],
        ['demonstration', 'demonstrasi'],
        ['department', 'departemen'],
        ['departure', 'keberangkatan'],
        ['deposit', 'setoran'],
        ['depression', 'depresi'],
        ['depth', 'kedalaman'],
        ['description', 'deskripsi'],
        ['design', 'desain'],
        ['desire', 'keinginan'],
        ['desk', 'meja'],
        ['destination', 'tujuan'],
        ['detail', 'detail'],
        ['detective', 'detektif'],
        ['development', 'pengembangan'],
        ['device', 'perangkat'],
        ['devotion', 'pengabdian'],
        ['dialogue', 'dialog'],
        ['diet', 'pola makan'],
        ['difference', 'perbedaan'],
        ['difficulty', 'kesulitan'],
        ['dinner', 'makan malam'],
        ['direction', 'arah'],
        ['director', 'direktur'],
        ['disaster', 'bencana'],
        ['discipline', 'disiplin'],
        ['discount', 'diskon'],
        ['discussion', 'diskusi'],
        ['disease', 'penyakit'],
        ['display', 'tampilan'],
        ['distance', 'jarak'],
        ['distribution', 'distribusi'],
        ['district', 'wilayah'],
        ['document', 'dokumen'],
        ['donation', 'donasi'],
        ['door', 'pintu'],
        ['doubt', 'keraguan'],
        ['draft', 'draf'],
        ['drama', 'drama'],
        ['dream', 'mimpi'],
        ['driver', 'pengemudi'],
        ['duty', 'tugas'],
        ['eagle', 'elang'],
        ['ear', 'telinga'],
        ['earth', 'bumi'],
        ['ease', 'kemudahan'],
        ['east', 'timur'],
        ['edge', 'tepi'],
        ['education', 'pendidikan'],
        ['effect', 'efek'],
        ['effort', 'usaha'],
        ['egg', 'telur'],
        ['eight', 'delapan'],
        ['eighteen', 'delapan belas'],
        ['eighty', 'delapan puluh'],
        ['either', 'baik'],
        ['elevator', 'lift'],
        ['elephant', 'gajah'],
        ['email', 'surel'],
        ['emergency', 'darurat'],
        ['emotion', 'emosi'],
        ['emphasis', 'penekanan'],
        ['employee', 'karyawan'],
        ['employer', 'majikan'],
        ['employment', 'pekerjaan'],
        ['empty', 'kosong'],
        ['enable', 'mengaktifkan'],
        ['encounter', 'pertemuan'],
        ['encourage', 'mendorong'],
        ['end', 'akhir'],
        ['energy', 'energi'],
        ['engine', 'mesin'],
        ['enhance', 'meningkatkan'],
        ['enjoy', 'menikmati'],
        ['enough', 'cukup'],
        ['ensure', 'memastikan'],
        ['entertainment', 'hiburan'],
        ['environment', 'lingkungan'],
        ['equipment', 'peralatan'],
        ['error', 'kesalahan'],
        ['escape', 'melarikan diri'],
        ['especially', 'terutama'],
        ['establish', 'mendirikan'],
        ['estimate', 'perkiraan'],
        ['evaluate', 'menilai'],
        ['event', 'acara'],
        ['everybody', 'semua orang'],
        ['evidence', 'bukti'],
        ['evolution', 'evolusi'],
        ['exactly', 'tepatnya'],
        ['example', 'contoh'],
        ['exchange', 'pertukaran'],
        ['exciting', 'menarik'],
        ['exercise', 'latihan'],
        ['exist', 'ada'],
        ['expect', 'mengharapkan'],
        ['experience', 'pengalaman'],
        ['experiment', 'percobaan'],
        ['expert', 'ahli'],
        ['explanation', 'penjelasan'],
        ['exploration', 'penjelajahan'],
        ['exposure', 'paparan'],
        ['expression', 'ekspresi'],
        ['extend', 'memperpanjang'],
        ['extension', 'perpanjangan'],
        ['extra', 'ekstra'],
        ['eye', 'mata'],
        ['face', 'wajah'], ['fact', 'fakta'], ['family', 'keluarga'], ['father', 'ayah'], ['fear', 'ketakutan'],
        ['field', 'bidang'], ['figure', 'angka'], ['film', 'film'], ['fire', 'api'], ['fish', 'ikan'],
        ['floor', 'lantai'], ['flower', 'bunga'], ['food', 'makanan'], ['force', 'gaya'], ['form', 'bentuk'],
        ['friend', 'teman'], ['game', 'permainan'], ['garden', 'taman'], ['float', 'mengapung'],
        ['fold', 'melipat'],
        ['forbid', 'melarang'],
        ['forecast', 'meramalkan'],
        ['foresee', 'melihat sebelumnya'],
        ['forgive', 'memaafkan'],
        ['form', 'membentuk'],
        ['formulate', 'merumuskan'],
        ['fortify', 'memperkuat'],
        ['found', 'mendirikan'],
        ['frame', 'membingkai'],
        ['freeze', 'membekukan'],
        ['frighten', 'menakut-nakuti'],
        ['fry', 'menggoreng'],
        ['fulfill', 'memenuhi'],
        ['function', 'berfungsi'],
        ['fund', 'mendanai'],
        ['gain', 'memperoleh'],
        ['gather', 'mengumpulkan'],
        ['generate', 'menghasilkan'],
        ['glance', 'melirik'],
        ['glide', 'meluncur'],
        ['glow', 'bersinar'],
        ['grab', 'meraih'],
        ['grade', 'memberi nilai'],
        ['graduate', 'lulus'],
        ['grant', 'memberikan'],
        ['grasp', 'memahami'],
        ['grate', 'memarut'],
        ['greet', 'menyapa'],
        ['grind', 'menggiling'],
        ['grip', 'mencengkeram'],
        ['grow', 'tumbuh'],
        ['guarantee', 'menjamin'],
        ['guard', 'menjaga'],
        ['guess', 'menebak'],
        ['guide', 'memandu'],
        ['halt', 'menghentikan'],
        ['hammer', 'memalu'],
        ['hand', 'memberikan'],
        ['handle', 'menangani'],
        ['hang', 'menggantung'],
        ['happen', 'terjadi'],
        ['harass', 'mengganggu'],
        ['harm', 'mencelakai'],
        ['harvest', 'memanen'],
        ['hate', 'membenci'],
        ['haul', 'mengangkut'],
        ['heal', 'menyembuhkan'],
        ['hear', 'mendengar'],
        ['heat', 'memanaskan'],
        ['help', 'membantu'],
        ['hesitate', 'ragu-ragu'],
        ['hide', 'menyembunyikan'],
        ['highlight', 'menyoroti'],
        ['hinder', 'menghalangi'],
        ['hire', 'mempekerjakan'],
        ['hit', 'memukul'],
        ['hold', 'memegang'],
        ['honor', 'menghormati'],
        ['hook', 'mengaitkan'],
        ['hope', 'berharap'],
        ['hop', 'melompat'],
        ['host', 'menjadi tuan rumah'],
        ['hug', 'memeluk'],
        ['hunt', 'berburu'],
        ['hurry', 'bergegas'],
        ['hurt', 'menyakiti'],
        ['identify', 'mengidentifikasi'],
        ['ignore', 'mengabaikan'],
        ['illustrate', 'menggambarkan'],
        ['imagine', 'membayangkan'],
        ['imitate', 'meniru'],
        ['immerse', 'membenamkan'],
        ['impart', 'memberikan'],
        ['implement', 'menerapkan'],
        ['imply', 'menyiratkan'],
        ['import', 'mengimpor'],
        ['impose', 'memberlakukan'],
        ['impress', 'mengagumkan'],
        ['improve', 'memperbaiki'],
        ['include', 'memasukkan'],
        ['incorporate', 'menggabungkan'],
        ['increase', 'meningkatkan'],
        ['indicate', 'menunjukkan'],
        ['induce', 'menyebabkan'],
        ['infect', 'menginfeksi'],
        ['infer', 'menyimpulkan'],
        ['influence', 'mempengaruhi'],
        ['inform', 'memberitahu'],
        ['ingest', 'menelan'],
        ['inhale', 'menghirup'],
        ['inherit', 'mewarisi'],
        ['initiate', 'memulai'],
        ['inject', 'menyuntikkan'],
        ['injure', 'melukai'],
        ['innovate', 'berinovasi'],
        ['inquire', 'menanyakan'],
        ['insert', 'memasukkan'],
        ['inspect', 'memeriksa'],
        ['inspire', 'menginspirasi'],
        ['install', 'menginstal'],
        ['instruct', 'menginstruksikan'],
        ['insult', 'menghina'],
        ['integrate', 'mengintegrasikan'],
        ['intend', 'bermaksud'],
        ['intensify', 'memperkuat'],
        ['interact', 'berinteraksi'],
        ['intercept', 'mencegat'],
        ['interfere', 'mengganggu'],
        ['interpret', 'menafsirkan'],
        ['interrupt', 'menginterupsi'],
        ['intervene', 'campur tangan'],
        ['introduce', 'memperkenalkan'],
        ['invent', 'menciptakan'],
        ['invest', 'menginvestasikan'],
        ['invite', 'mengundang'],
        ['involve', 'melibatkan'],
        ['iron', 'menyetrika'], ['wander', 'mengembara'],
        ['warehouse', 'gudang'],
        ['warfare', 'pertempuran'],
        ['warmth', 'kehangatan'],
        ['warning', 'peringatan'],
        ['warrior', 'pejuang'],
        ['wash', 'mencuci'],
        ['waste', 'membuang'],
        ['watch', 'menonton'],
        ['waterfall', 'air terjun'],
        ['wave', 'gelombang'],
        ['wealth', 'kekayaan'],
        ['weapon', 'senjata'],
        ['weary', 'lelah'],
        ['weather', 'cuaca'],
        ['weave', 'menenun'],
        ['wedding', 'pernikahan'],
        ['weed', 'gulma'],
        ['weekend', 'akhir pekan'],
        ['weep', 'menangis'],
        ['weigh', 'menimbang'],
        ['weight', 'berat'],
        ['welcome', 'menyambut'],
        ['welfare', 'kesejahteraan'],
        ['wellbeing', 'kesehatan'],
        ['west', 'barat'],
        ['wet', 'basah'],
        ['whale', 'paus'],
        ['whatsoever', 'apa pun'],
        ['wheat', 'gandum'],
        ['wheel', 'roda'],
        ['when', 'ketika'],
        ['where', 'dimana'],
        ['whereas', 'sedangkan'],
        ['whether', 'apakah'],
        ['whisper', 'berbisik'],
        ['whistle', 'bersiul'],
        ['white', 'putih'],
        ['whole', 'seluruh'],
        ['wholly', 'sepenuhnya'],
        ['wicked', 'jahat'],
        ['wide', 'lebar'],
        ['widespread', 'tersebar luas'],
        ['widow', 'janda'],
        ['width', 'lebar'],
        ['wild', 'liar'],
        ['wilderness', 'alam liar'],
        ['will', 'kehendak'],
        ['willing', 'bersedia'],
        ['win', 'menang'],
        ['wind', 'angin'],
        ['window', 'jendela'],
        ['wine', 'anggur'],
        ['wing', 'sayap'],
        ['winner', 'pemenang'],
        ['winter', 'musim dingin'],
        ['wipe', 'menghapus'],
        ['wire', 'kawat'],
        ['wisdom', 'kebijaksanaan'],
        ['wise', 'bijaksana'],
        ['wish', 'berharap'],
        ['wit', 'kecerdikan'],
        ['withdraw', 'menarik'],
        ['within', 'di dalam'],
        ['without', 'tanpa'],
        ['witness', 'saksi'],
        ['wolf', 'serigala'],
        ['woman', 'wanita'],
        ['wonder', 'heran'],
        ['wonderful', 'indah'],
        ['wood', 'kayu'],
        ['wool', 'wol'],
        ['word', 'kata'],
        ['work', 'bekerja'],
        ['worker', 'pekerja'],
        ['workplace', 'tempat kerja'],
        ['world', 'dunia'],
        ['worldwide', 'seluruh dunia'],
        ['worm', 'cacing'],
        ['worry', 'khawatir'],
        ['worship', 'menyembah'],
        ['worth', 'berharga'],
        ['worthy', 'layak'],
        ['would', 'akan'],
        ['wound', 'luka'],
        ['wrap', 'membungkus'],
        ['wreck', 'merusak'],
        ['wrestle', 'bergulat'],
        ['wrinkle', 'kerutan'],
        ['write', 'menulis'],
        ['writer', 'penulis'],
        ['writing', 'tulisan'],
        ['wrong', 'salah'],
        ['yard', 'halaman'],
        ['year', 'tahun'],
        ['yell', 'berteriak'],
        ['yellow', 'kuning'],
        ['yes', 'ya'],
        ['yesterday', 'kemarin'],
        ['yield', 'menghasilkan'],
        ['young', 'muda'],
        ['youth', 'pemuda'],
        ['zeal', 'semangat'],
        ['zebra', 'zebra'],
        ['zero', 'nol'],
        ['zone', 'zona'],
        ['zoo', 'kebun binatang'],
        ['zoom', 'memperbesar'],
        ['zucchini', 'zucchini']
      ];

      deck = sample.map((s, i) => ({
        front: s[0],
        back: s[1],
        id: i + 1,
        interval: 0,
        repetition: 0,
        ef: 2.5,
        due: todayDate(),
        easeHistory: [],
        history: []
      }));

      saveToStorage();
    }

    function saveToStorage() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(deck));
    }

    function rebuildQueue() {
      const t = todayDate();
      queue = deck
        .map((c, idx) => ({
          due: c.due <= t,
          isNew: c.repetition === 0,
          idx
        }))
        .filter(item => item.due)
        .map(x => x.idx);

      // Simple shuffle
      for (let i = queue.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [queue[i], queue[j]] = [queue[j], queue[i]];
      }
    }

    function renderStats() {
      document.getElementById('total').textContent = deck.length;
      document.getElementById('due').textContent = queue.length;
      document.getElementById('new').textContent = deck.filter(c => c.repetition === 0).length;
      document.getElementById('studied').textContent = deck.filter(c => c.history && c.history.length > 0).length;
    }

    function renderList(filter = '') {
      const el = document.getElementById('list');
      el.innerHTML = '';

      const f = filter.trim().toLowerCase();
      const filteredDeck = deck.filter(c =>
        !f || c.front.toLowerCase().includes(f) || c.back.toLowerCase().includes(f)
      );

      if (filteredDeck.length === 0) {
        el.innerHTML = '<div class="empty-state">Tidak ditemukan kosakata</div>';
        return;
      }

      filteredDeck.forEach((c, idx) => {
        const div = document.createElement('div');
        div.className = 'list-item';
        div.innerHTML = `
          <div>
            <strong>${c.front}</strong>
            <div class="muted" style="font-size:13px">${c.back}</div>
          </div>
          <div>
            <button class="btn-ghost" data-idx="${idx}">Study</button>
          </div>
        `;
        el.appendChild(div);
      });
    }

    function renderDeckPreview() {
      const el = document.getElementById('deckPreviewList');
      el.innerHTML = '';

      if (deck.length === 0) {
        el.innerHTML = '<div class="empty-state">Belum ada kosakata</div>';
        return;
      }

      deck.slice(0, 20).forEach(c => {
        const d = document.createElement('div');
        d.className = 'list-item';
        d.innerHTML = `
          <div>
            <strong>${c.front}</strong>
            <div class="muted">${c.back}</div>
          </div>
        `;
        el.appendChild(d);
      });
    }

    function loadNext() {
      const frontEl = document.getElementById('front');
      const backEl = document.getElementById('back');
      const studyPanel = document.getElementById('studyPanel');
      const cardEl = document.getElementById('card');

      if (queue.length === 0) {
        frontEl.textContent = 'Tidak ada kartu yang harus dipelajari hari ini.';
        backEl.textContent = '';
        cardEl.classList.remove('flipped');
        current = null;
        studyPanel.style.display = 'none';
        return;
      }

      const idx = queue.shift();
      current = idx;
      
      frontEl.textContent = deck[idx].front;
      backEl.textContent = deck[idx].back;
      cardEl.classList.remove('flipped');
      cardEl.classList.add('card-enter');
      studyPanel.style.display = 'block';
      
      // Remove animation class after it completes
      setTimeout(() => {
        cardEl.classList.remove('card-enter');
      }, 300);
    }

    function flip() {
      if (current === null) return;
      const cardEl = document.getElementById('card');
      cardEl.classList.toggle('flipped');
    }

    function applySM2(card, score) {
      const now = todayDate();

      if (score < 3) {
        card.repetition = 0;
        card.interval = 1;
        card.ef = Math.max(1.3, card.ef - 0.2);
      } else {
        if (card.repetition === 0) card.interval = 1;
        else if (card.repetition === 1) card.interval = 6;
        else card.interval = Math.round(card.interval * card.ef);

        card.repetition += 1;
        card.ef = Math.max(1.3, card.ef + (0.1 - (5 - score) * (0.08 + (5 - score) * 0.02)));
      }

      card.due = new Date(now + card.interval * 24 * 60 * 60 * 3000).getTime();
      card.history = card.history || [];
      card.history.push({ date: Date.now(), score });
      card.easeHistory = card.easeHistory || [];
      card.easeHistory.push(card.ef);
    }

    // --- UI Event Listeners ---
    document.getElementById('search').addEventListener('input', e => {
      renderList(e.target.value);
    });

    document.getElementById('list').addEventListener('click', e => {
      const btn = e.target.closest('button[data-idx]');
      if (!btn) return;

      const idx = parseInt(btn.dataset.idx);
      if (isNaN(idx)) return;

      queue.unshift(idx);
      loadNext();
      renderStats();
    });

    document.getElementById('studyNext').addEventListener('click', () => {
      rebuildQueue();
      loadNext();
      renderStats();
    });

    document.getElementById('flip').addEventListener('click', flip);

    document.getElementById('skip').addEventListener('click', () => {
      if (current !== null) {
        queue.push(current);
        current = null;
        loadNext();
        renderStats();
      }
    });

    document.querySelectorAll('.rate-btn').forEach(btn => {
      btn.addEventListener('click', e => {
        if (current === null) return;

        const score = parseInt(e.target.dataset.score);
        applySM2(deck[current], score);
        saveToStorage();
        rebuildQueue();
        loadNext();
        renderStats();
        renderDeckPreview();
      });
    });

    // Keyboard shortcuts
    window.addEventListener('keydown', e => {
      if (e.code === 'Space') {
        e.preventDefault();
        flip();
      }
      if (e.key === '1') document.querySelector('.rate-btn.again')?.click();
      if (e.key === '2') document.querySelector('.rate-btn.hard')?.click();
      if (e.key === '3') document.querySelector('.rate-btn.good')?.click();
      if (e.key === '4') document.querySelector('.rate-btn.easy')?.click();
    });

    // CSV Import/Export
    document.getElementById('filein').addEventListener('change', async e => {
      const file = e.target.files[0];
      if (!file) return;

      try {
        const text = await file.text();
        const lines = text.split(/\r?\n/)
          .map(line => line.trim())
          .filter(line => line.length > 0);

        const imported = lines.map((line, i) => {
          const [front, ...backParts] = line.split(',');
          const back = backParts.join(',').trim();
          return {
            front: front.trim(),
            back,
            id: Date.now() + i,
            interval: 0,
            repetition: 0,
            ef: 2.5,
            due: todayDate(),
            easeHistory: [],
            history: []
          };
        }).filter(card => card.front && card.back);

        if (imported.length === 0) {
          alert('Tidak ada data valid yang ditemukan dalam file CSV');
          return;
        }

        deck = imported;
        saveToStorage();
        rebuildQueue();
        renderAll();
        alert(`Berhasil mengimpor ${imported.length} kosakata!`);
      } catch (err) {
        console.error('Error importing CSV:', err);
        alert('Gagal mengimpor file CSV');
      }
    });

    document.getElementById('export').addEventListener('click', () => {
      const csv = deck.map(c => `${c.front},${c.back}`).join('\n');
      const blob = new Blob([csv], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);

      const a = document.createElement('a');
      a.href = url;
      a.download = 'vocabsr_deck.csv';
      a.click();

      setTimeout(() => {
        URL.revokeObjectURL(url);
      }, 100);
    });

    document.getElementById('reset').addEventListener('click', () => {
      if (confirm('Anda yakin ingin mereset semua progres?')) {
        localStorage.removeItem(STORAGE_KEY);
        loadFromStorage();
        rebuildQueue();
        renderAll();
      }
    });

    function renderAll() {
      rebuildQueue();
      renderStats();
      renderList();
      renderDeckPreview();
    }

    // Initialize
    loadFromStorage();
    renderAll();
  </script>
</body>

</html>